<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">
   <f:view locale="#{localeCtrl.actual}" />    
   		<ui:composition >
   		
   			<h:panelGrid columns="1" width="100%" style="text-align:center;" >
   				 <h:outputText value="#{locale.contexteinventaire}" style="FONT-SIZE: small; FONT-WEIGHT: bold;"/>
			</h:panelGrid>
  				
  			<h:panelGrid  columns="2" width="100%"	 >
				
				<h:panelGroup>
  					<h:outputText value="#{locale.inventaire}" />
  					<ui:include src="/shared/include/required.xhtml" />
  				</h:panelGroup>
  				<h:panelGroup>
				<h:selectOneMenu id="somn_budget" required="true" requiredMessage="#{msg['erreur.validation.obligatoire']}"  value="#{sessionCtrl.defaultVue.inventaire}" style=" width : 100%;"   >				
					<f:selectItems value="#{sessionCtrl.defaultVue.listeInventaire}" />	
					<a4j:support event="onchange" ajaxSingle="true" reRender="somn_role, pngd_contexte" >
						<f:setPropertyActionListener value="#{null}" target="#{sessionCtrl.defaultVue.listeRole}" />
						<f:setPropertyActionListener value="#{null}" target="#{sessionCtrl.defaultVue.listeDroit}" />
					</a4j:support>																			
				</h:selectOneMenu>	
				<rich:message for="somn_budget" styleClass="msg_error"/>
				</h:panelGroup>
				
				<h:panelGroup>
 					<h:outputText value="#{locale.etapinv}"	/>
 					<ui:include src="/shared/include/required.xhtml" />
 				</h:panelGroup>
 				
 				<h:panelGroup>
				<h:selectOneMenu id="somn_role" required="true" requiredMessage="#{msg['erreur.validation.obligatoire']}" value="#{sessionCtrl.defaultVue.etape}" style=" width : 100%;" >		
					<f:selectItems value="#{sessionCtrl.defaultVue.listeEtapesInventaire}" />	
					<a4j:support event="onchange" ajaxSingle="true" reRender="pngd_contexte" >
						<f:setPropertyActionListener value="#{null}" target="#{sessionCtrl.defaultVue.listeDroit}" />
					</a4j:support>					
				</h:selectOneMenu>	
				<rich:message for="somn_role" styleClass="msg_error"/>
				</h:panelGroup>
				
				
			
			</h:panelGrid>
	
				
  		
			<rich:spacer height="10px" />
			<rich:separator height="1px"/>
			
			<h:panelGrid columns="2" width="100%" >
			
				<h:panelGrid columns="" style="text-align:left;" >			
					<a4j:region>		
						<a4j:status id="stus_actions" startText="#{locale.connexionencours}" stopText="" />
					</a4j:region>
				</h:panelGrid>
									
				<h:panelGrid columns="" width="100%" style="text-align:right;" >
					<h:panelGroup id="pnel_actions" >
						<a4j:commandButton styleClass="formButton" action="#{sessionCtrl.validerConnexionAgentInv}" 	value="#{locale.valider}"    type="submit" 	status="stus_actions"  />
						<a4j:commandButton styleClass="formButton" action="#{sessionCtrl.annulerConnexionAgentInv}" 	value="#{locale.annuler}"  	type="submit" 	ajaxSingle="true" immediate="true" />					
					</h:panelGroup>	
				</h:panelGrid>
																
			</h:panelGrid>				
					   			      			  		
   		</ui:composition>

</html>