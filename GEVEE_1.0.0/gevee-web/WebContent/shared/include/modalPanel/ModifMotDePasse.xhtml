<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

   		<ui:composition >
   		
			<rich:modalPanel id="mpnl_password" autosized="true" minWidth="450"   >
			
				<f:facet name="header">
					<h:outputText value="Modifier mot de passe" style="padding-right:15px;" />						
				</f:facet>
				
				<h:form>		
				<h:panelGrid id="pnel_pwd" columns="1" width="100%"  style="border:2px solid #{richSkin.panelBorderColor}; " border="0" cellpadding="0" cellspacing="0"  >
					
					<h:panelGrid columns="" style="text-align:center;">
						<rich:messages id="msgs_message" style="height:4px;font-size:small;" showSummary="false" showDetail="true" warnClass="msg_warn" infoClass="msg_infos" level="INFO,WARN"  />						
					</h:panelGrid>
					
					<h:panelGrid columns="2" width="100%"  >
					
						<h:outputText value="Utilisateur" />
						<h:inputText  value="#{sessionCtrl.defaultVue.login}"  style="width: 90%"  disabled="true" />
												
		 				<h:panelGroup>
		   					<h:outputText value="Ancien mot de passe" />
		   					<h:outputText value="*" style="COLOR: #ff0000;"/>
		   					<h:outputText value=" :" />
		   				</h:panelGroup>   				
		   				<h:panelGroup> 				
		 					<h:inputSecret id="inpt_oldPwd"  value="#{sessionCtrl.defaultVue.oldPassword}" maxlength="30"  style="width: 90%" 
		 						required="true" requiredMessage="#{locale.valeurobligatoire}" readonly="#{sessionCtrl.defaultVue.modified}" />
		   					<rich:message for="inpt_oldPwd" errorClass="msg_error" />					 				
		   				</h:panelGroup>
						
		  				<h:panelGroup>
		   					<h:outputText value="Nouveau mot de passe" style=""/>
		   					<h:outputText value="*" style="COLOR: #ff0000;"/>
		   					<h:outputText value=" :" />
		   				</h:panelGroup>
		   				<h:panelGroup> 				
		 					<h:inputSecret id="inpt_newPwd"  value="#{sessionCtrl.defaultVue.newPassword}" maxlength="30"  style="width: 90%" 
		 						required="true" requiredMessage="#{locale.valeurobligatoire}"  readonly="#{sessionCtrl.defaultVue.modified}"/>
		   					<rich:message for="inpt_newPwd" errorClass="msg_error" />					 				
		   				</h:panelGroup>
		   				
		   				<h:panelGroup>
		   					<h:outputText value="Confirmation" />
		   					<h:outputText value="*" style="COLOR: #ff0000;"/>
		   					<h:outputText value=" :" />
		   				</h:panelGroup>
		   				<h:panelGroup> 				
		 					<h:inputSecret id="inpt_confirmation"  value="#{sessionCtrl.defaultVue.confirmNewPassword}" maxlength="30"  style="width: 90%" 
		 						required="true" requiredMessage="Valeur obligatoire"  readonly="#{sessionCtrl.defaultVue.modified}"/>
		   					<rich:message for="inpt_confirmation" errorClass="msg_error" />					 				
		   				</h:panelGroup> 
   				  				
					</h:panelGrid>
						
					<rich:separator height="0px" style="border:1px solid #{richSkin.panelBorderColor};"  />
										
					<h:panelGrid columns="1" width="100%"  style="text-align:right;" > 
					
						<h:panelGroup>						
																								
								<a4j:commandButton value="#{locale.valider}"	actionListener="#{sessionCtrl.modifyPassword}"  status="stus_actions"  rendered="#{! sessionCtrl.defaultVue.modified}" reRender="pnel_pwd" />
																																							
								<a4j:commandButton value="#{locale.fermer}" 	actionListener="#{sessionCtrl.annulerModifPassword}" ajaxSingle="true" immediate="true" oncomplete="#{rich:component('mpnl_password')}.hide();return false;"  />
																												
						</h:panelGroup>					
					</h:panelGrid>									
				</h:panelGrid>
				</h:form>
				
			</rich:modalPanel>
   			
   		</ui:composition>

</html>